---
title: 'Create Webhook Subscription'
api: 'POST /api/v2/risk/webhooks'
---

Subscribe to risk update notifications. Webhooks are triggered when risk data is created, updated, or deleted.

## Body Parameters

<ParamField body="endpoint" type="string" required>
  HTTPS URL to receive webhook notifications
</ParamField>

<ParamField body="secret" type="string">
  Shared secret for HMAC signature verification. Auto-generated if not provided.
</ParamField>

<ParamField body="assetAddress" type="string">
  Filter notifications to a specific asset. Receives all assets if not specified.
</ParamField>

<ParamField body="events" type="array" default="['risk.updated', 'risk.created', 'risk.deleted']">
  Event types to subscribe to: `risk.created`, `risk.updated`, `risk.deleted`
</ParamField>

## Webhook Payload

When triggered, your endpoint receives:
```json
{
  "event": "risk.updated",
  "assetAddress": "0x...",
  "previous": { "score": 42, "grade": "C" },
  "current": { "score": 35, "grade": "C" },
  "category": "credit",
  "reason": "Quarterly reassessment",
  "updatedAt": "2024-01-15T10:30:00.000Z",
  "subscriptionId": "sub_abc123",
  "timestamp": "2024-01-15T10:30:00.500Z"
}
```

The `X-Risk-Signature` header contains the HMAC-SHA256 signature of the payload.

<RequestExample>
```bash cURL
curl -X POST "https://api.trusset.org/api/v2/risk/webhooks" \
  -H "x-api-key: trusset_v2_abc123xy_a1b2c3d4e5f6..." \
  -H "Content-Type: application/json" \
  -d '{
    "endpoint": "https://mybank.com/webhooks/risk-updates",
    "events": ["risk.updated", "risk.created"]
  }'
```
```javascript JavaScript
const response = await fetch(
  'https://api.trusset.org/api/v2/risk/webhooks',
  {
    method: 'POST',
    headers: {
      'x-api-key': 'trusset_v2_abc123xy_a1b2c3d4e5f6...',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      endpoint: 'https://mybank.com/webhooks/risk-updates',
      events: ['risk.updated', 'risk.created']
    })
  }
);

const data = await response.json();
console.log('Webhook secret:', data.data.secret);
```
```python Python
import requests

response = requests.post(
    'https://api.trusset.org/api/v2/risk/webhooks',
    headers={
        'x-api-key': 'trusset_v2_abc123xy_a1b2c3d4e5f6...',
        'Content-Type': 'application/json'
    },
    json={
        'endpoint': 'https://mybank.com/webhooks/risk-updates',
        'events': ['risk.updated', 'risk.created']
    }
)

data = response.json()
print(f"Webhook secret: {data['data']['secret']}")
```
```typescript TypeScript
interface WebhookSubscription {
  id: string;
  endpoint: string;
  secret: string;
  assetAddress: string | null;
  events: string[];
  active: boolean;
  createdAt: string;
}

const response = await fetch(
  'https://api.trusset.org/api/v2/risk/webhooks',
  {
    method: 'POST',
    headers: {
      'x-api-key': 'trusset_v2_abc123xy_...',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      endpoint: 'https://mybank.com/webhooks/risk-updates',
      events: ['risk.updated']
    })
  }
);
const data = await response.json();
const subscription: WebhookSubscription = data.data;
```
</RequestExample>

<ResponseExample>
```json Response
{
  "success": true,
  "data": {
    "id": "clxwebhook001",
    "instanceId": "inst_abc123",
    "endpoint": "https://mybank.com/webhooks/risk-updates",
    "secret": "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6",
    "assetAddress": null,
    "events": ["risk.updated", "risk.created"],
    "active": true,
    "failureCount": 0,
    "createdAt": "2024-01-15T10:30:00.000Z",
    "updatedAt": "2024-01-15T10:30:00.000Z"
  },
  "metadata": {
    "requestId": "550e8400-e29b-41d4-a716-446655440000",
    "timestamp": "2024-01-15T10:30:00.000Z"
  }
}
```
</ResponseExample>