---
title: '24/7 Trading'
description: 'Continuous market access for tokenized stocks through automated market makers'
---

Tokenized stocks require continuous market access. Traditional stock exchanges operate limited hours, but digital assets demand round-the-clock liquidity. Our trading integration provides this through weighted liquidity pools with oracle-based price management.

![Pool user interface](/images/pool.png)

## Architecture Overview

The trading system consists of three core components that work together to maintain fair pricing and continuous liquidity:

<CardGroup cols={3}>
  <Card title="Liquidity Pools" icon="water">
    Weighted pools holding stock tokens and stablecoins
  </Card>
  <Card title="Price Oracles" icon="broadcast-tower">
    Multi-source price feeds with market hour awareness
  </Card>
  <Card title="Pricing Engine" icon="calculator">
    Dynamic execution pricing with slippage protection
  </Card>
</CardGroup>

## How It Works

### Pool Creation

Each tokenized stock trades through a weighted pool containing the stock token and a stablecoin (typically USDC or EURS). The weights determine how much of each asset the pool holds at equilibrium.

```
Stock Token: 80% weight
Stablecoin: 20% weight
```

This weighting reduces the capital required to provide liquidity while maintaining price stability. A pool with $100,000 total value would hold $80,000 in stock tokens and $20,000 in stablecoins at equilibrium.

### Price Management

<Steps>
  <Step title="Primary Price Feed">
    During market hours, the oracle receives prices from the stock exchange through authenticated bank feeds. Banks sign price updates with their private keys, ensuring data integrity.
  </Step>

  <Step title="Price Validation">
    Each incoming price is validated against the current pool price. If deviation exceeds configured thresholds (typically 2%), trading halts automatically until manual review.
  </Step>

  <Step title="After-Hours Adjustment">
    Outside market hours, the system uses the last closing price with an additional spread (default 0.5%) to account for reduced liquidity and increased risk.
  </Step>

  <Step title="TWAP Calculation">
    The oracle maintains a 30-minute time-weighted average price (TWAP) across 30 samples, providing a smoothed reference price resistant to manipulation.
  </Step>
</Steps>

## Integration Methods

Financial institutions can integrate the trading system through three approaches:

<Tabs>
  <Tab title="Manual Operations">
    ### Issuers Application
    
    Access the trading interface through the issuers portal at `issuers.trusset.org`. This provides:
    
    - Pool creation and configuration
    - Liquidity management
    - Trading interface
    - Performance monitoring
    
    Each operation requires transaction signing through your connected wallet. The interface guides you through each step with pre-calculated parameters.
  </Tab>

  <Tab title="API Integration">
    ### Programmatic Access
    
    Connect your systems directly to our trading infrastructure:
    
    ```javascript
    // Create a new pool
    POST /v1/pools/create
    {
      "stockISIN": "US0378331005",
      "stockToken": "0x...",
      "pairedToken": "0x...",
      "stockWeight": "800000000000000000",
      "pairedWeight": "200000000000000000",
      "swapFeePercentage": "3000000000000000"
    }
    ```
    
    The API handles all blockchain interactions while providing transaction data for your records. Each instance receives isolated API keys maintaining complete separation between institutions.
  </Tab>

  <Tab title="White-Label Solution">
    ### Marketplace Module
    
    Deploy a complete trading interface under your brand:
    
    1. Enable the marketplace module in your instance
    2. Approve pools for display in your interface
    3. Customize branding and user experience
    4. Users trade directly through your platform
    
    The white-label solution handles wallet connections, transaction building, and execution while maintaining your institutional controls.
  </Tab>
</Tabs>

## Oracle System

The oracle system ensures accurate pricing across different market conditions:

<AccordionGroup>
  <Accordion title="Bank Feed Adapter">
    Banks provide signed price updates directly to the oracle. Each bank receives:
    
    - Dedicated signer address for authentication
    - Configurable staleness thresholds
    - Nonce-based replay protection
    
    Price updates include confidence scores, allowing the system to weight more reliable feeds higher during aggregation.
  </Accordion>

  <Accordion title="Market Hours Detection">
    The oracle automatically detects market hours based on:
    
    - Trading venue schedules (NYSE: 9:30 AM - 4:00 PM ET)
    - Holiday calendars
    - Weekend detection
    
    This ensures appropriate pricing models apply during different market conditions.
  </Accordion>

  <Accordion title="Circuit Breakers">
    Automatic trading halts trigger when:
    
    - Price deviation exceeds 2% from oracle price
    - Feed staleness exceeds 5 minutes
    - Underlying stock is halted or delisted
    - Manual intervention requested
    
    Only authorized administrators can resume trading after reviewing the halt condition.
  </Accordion>
</AccordionGroup>

## Liquidity Provision

### Initial Pool Setup

New pools require initialization with balanced liquidity:

<Note>
  Initial liquidity should match the pool weights. For an 80/20 pool with $100,000 total value, provide $80,000 in stock tokens and $20,000 in stablecoins.
</Note>

The first liquidity provider receives pool tokens representing their share. These tokens track ownership and enable proportional withdrawal.

### Adding Liquidity

Subsequent liquidity providers can add assets in two ways:

**Proportional Addition**: Provide both assets matching current pool ratios
**Single-Asset Entry**: Provide one asset, automatically swapped to achieve balance

Single-asset entries incur additional slippage from the internal balancing swap.

### Removing Liquidity

Liquidity providers withdraw by burning their pool tokens, receiving:

- Proportional amounts of both assets
- Accumulated trading fees
- Any impermanent loss or gain

<Warning>
  Withdrawing during high volatility may result in impermanent loss. The received asset ratio reflects current pool prices, not initial deposit ratios.
</Warning>

## Swap Execution

### Quote Generation

Each swap quote includes:

```json
{
  "amountOut": "1525.50",
  "executionPrice": "152.55",
  "priceImpact": "0.15%",
  "tradingFee": "4.58",
  "slippageTolerance": "0.5%"
}
```

The execution price incorporates:
- Current oracle price
- Pool liquidity depth  
- Trading fee (default 0.3%)
- Expected slippage

### Transaction Flow

<Steps>
  <Step title="Quote Request">
    User requests swap quote with input amount
  </Step>

  <Step title="Price Calculation">
    System calculates output using weighted math and oracle price
  </Step>

  <Step title="Slippage Check">
    Verify execution price within acceptable bounds
  </Step>

  <Step title="Execution">
    Swap executes atomically with exact amounts
  </Step>

  <Step title="Settlement">
    Assets transfer instantly to user wallet
  </Step>
</Steps>

### After-Hours Trading

Outside market hours, spreads widen to reflect reduced liquidity:

| Market Status | Base Fee | Additional Spread |
|--------------|----------|-------------------|
| Open         | 0.3%     | 0%               |
| Closed       | 0.3%     | 0.5%             |
| Halted       | N/A      | Trading Disabled  |

The additional spread protects liquidity providers from adverse price movements when reference prices are stale.

## Risk Management

### Price Deviation Monitoring

The system continuously compares pool prices against oracle feeds:

```
Deviation = |Pool Price - Oracle Price| / Oracle Price

If Deviation > 2%:
  - Halt trading
  - Alert administrators
  - Log incident
```

### TWAP Protection

Time-weighted average prices prevent manipulation through:

- 30-minute observation window
- 30 price samples
- Weighted aggregation
- Staleness detection

Older samples receive lower weight, ensuring recent prices have appropriate influence.

### Emergency Controls

Administrators can:

<Card title="Pause Trading" icon="pause">
  Immediately halt all swaps while investigating issues
</Card>

<Card title="Adjust Parameters" icon="sliders">
  Modify fees, slippage tolerance, and deviation thresholds
</Card>

<Card title="Update Oracles" icon="arrows-rotate">
  Add or remove price feed sources
</Card>

<Card title="Force Settlement" icon="gavel">
  Process pending transactions during system recovery
</Card>

## Performance Metrics

Monitor pool health through key indicators:

| Metric | Description | Healthy Range |
|--------|-------------|---------------|
| TVL | Total value locked in pool | Above $100,000 |
| Volume/TVL | Daily volume relative to liquidity | 0.1 to 2.0 |
| Price Deviation | Difference from oracle price | Below 0.5% |
| Slippage | Price impact for 1% of liquidity | Below 2% |

## Technical Implementation

The trading system deploys as a set of smart contracts:

<Tabs>
  <Tab title="PoolManager">
    Orchestrates pool creation and swap routing. Maintains registry of active pools and enforces access controls.
  </Tab>

  <Tab title="Oracle">
    Aggregates price feeds and calculates TWAP. Detects market hours and manages circuit breakers.
  </Tab>

  <Tab title="PricingHook">
    Calculates execution prices with slippage protection. Applies after-hours spreads and validates price bounds.
  </Tab>

  <Tab title="Vault">
    Holds pooled assets securely. Processes swaps atomically and manages liquidity operations.
  </Tab>
</Tabs>

Each contract undergoes formal verification and audit before deployment. Timelocks protect administrative functions, requiring 48-hour delays for critical changes.

## Compliance Integration

Trading maintains regulatory compliance through:

### Transaction Monitoring
Every swap records:
- Participant addresses
- Asset amounts
- Execution prices
- Timestamps

### Reporting Capabilities
Generate reports for:
- Daily trading volumes
- Liquidity changes
- Price movements
- User activity

### Audit Trail
Immutable blockchain records provide complete transaction history for regulatory review.

## Next Steps

<CardGroup cols={2}>
  <Card title="Stock Tokenization" icon="coins" href="/stock-exchanges">
    Learn how to tokenize stocks and create trading pools
  </Card>
  
  <Card title="API Reference" icon="code" href="/balancer-exchange-intro">
    Complete API documentation for trading integration
  </Card>
  
  <Card title="Liquidity Operations" icon="droplet" href="/endpoints/balancer-exchange/add-liquidity">
    Add and manage liquidity in your pools
  </Card>
  
  <Card title="White-Label Platform" icon="palette" href="/white-label">
    Deploy your complete trading platform
  </Card>
</CardGroup>