---
title: "Identity Certificates"
description: "On-chain KYC verification system for compliant token transfers"
---

![ID verification integration in issuance interface](/images/id.png)

## System Architecture

Identity certificates enable compliant token transfers through on-chain KYC verification. The system stores verification proofs at contract address `0x3df8b49B615E016d0C3828A8805735abEC383Db9` with country jurisdiction data and expiry timestamps.

## Verification Methods

### Third-Party Verification

Integration with Entrust provides automated KYC collection. Send verification links to email addresses or wallet addresses with custom expiry periods (24 hours to 30 days). Recipients complete identity verification through Entrust's secure portal. Verification data automatically records on-chain upon completion.

**Process flow**: Generate link → Send to recipient → User completes KYC → Automatic on-chain recording → Token transfer enabled

### Manual Verification

Institutions with compliance licenses directly input KYC data. This method requires assumption of full legal responsibility for verification accuracy. Input includes wallet address, ISO 3166-1 alpha-2 country code, and optional expiry timestamp.

**Required data**: Ethereum address validation, country jurisdiction (2-letter code), verification duration (Unix timestamp), issuer signature

### Batch Processing

Process up to 5,000 verifications per transaction through CSV or API submission. System automatically chunks large batches to optimize gas costs (80% reduction versus individual transactions).

<Tabs>
  <Tab title="CSV Upload">
    ```csv
    address,country
    0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb6,US
    0x5aAeb6053f3E94C9b9A09f33669435E7Ef1BeAed,GB
    ```
    
    Supported headers: `address`, `wallet`, `walletAddress`, `user`
    Country fields: `country`, `countryCode`, `jurisdiction`
  </Tab>
  
  <Tab title="API Submission">
    ```json
    POST /api/kyc/batch-verify
    
    {
      "data": [
        {"address": "0x742d35Cc...", "country": "US"},
        {"address": "0x5aAeb6053...", "country": "GB"}
      ]
    }
    ```
    
    Returns batch ID for progress tracking.
  </Tab>
</Tabs>

## On-Chain Storage Model

<Card title="Data Structure" icon="database">
  **Stored**: Verification status (boolean), Country code (bytes2), Expiry time (uint256), Issuer address (address)
  
  **Not Stored**: Personal information, Document numbers, Biometric data, Contact details
  
  **Hash Storage**: SHA-256 hash of complete KYC package stored for audit proof
</Card>

Verification data persists permanently on-chain, creating an immutable audit trail. Each verification links to the issuing institution's address for regulatory attribution.

## Integration Pathways

![KYC/B interface](/images/manid.png)

### Web Interface

Access through the issuers portal at `issuers.trusset.org`. Visual dashboard displays verification status, completion rates, and expiry tracking. Export functionality for regulatory reporting.

**Features**: Link generation wizard, bulk upload interface, real-time status monitoring, automated email notifications

### API Integration

<Steps>
  <Step title="Authentication">
    Obtain API key from instance creation. Include in header: `x-api-key: {your_key}`
  </Step>
  
  <Step title="Verify Users">
    Single verification: `/api/kyc/verify-single`
    Batch processing: `/api/kyc/batch-verify`
    CSV upload: `/api/kyc/batch-import`
  </Step>
  
  <Step title="Monitor Status">
    Check individual: `/api/kyc/get-status/{address}`
    Batch progress: `/api/kyc/get-batch-status/{batchId}`
    Export records: `/api/kyc/export`
  </Step>
</Steps>

### Smart Contract Direct

For institutions requiring direct blockchain interaction:

```solidity
interface IIdentityRegistry {
    function registerIdentity(
        address _user,
        bytes2 _country,
        uint256 _expiry
    ) external;
    
    function batchRegisterIdentity(
        address[] calldata _users,
        bytes2[] calldata _countries,
        uint256[] calldata _expiries
    ) external;
}
```

## Compliance Enforcement

Identity certificates automatically integrate with token contracts. Transfer attempts fail for non-verified addresses with revert message `KYC_NOT_VERIFIED`. 

**Enforcement mechanisms**:
- Pre-transfer verification check (adds 5,000 gas)
- Automatic expiry enforcement at block timestamp
- Cross-token verification sharing within instance
- Jurisdiction-based transfer restrictions

### Country-Specific Rules

Implement transfer restrictions based on stored country codes:

| Jurisdiction | Restriction Type | Implementation |
|-------------|-----------------|----------------|
| US persons | Accredited investor only | Secondary verification flag |
| EU residents | MiCA compliance required | Whitepaper registration check |
| Sanctioned countries | Complete block | Automatic rejection |

## Operational Considerations

### Gas Optimization

Individual verification: 65,000 gas
Batch verification (100 users): 2,100,000 gas (21,000 per user)
Batch verification (1,000 users): 18,500,000 gas (18,500 per user)

Automatic retry with exponential backoff for failed transactions. Maximum 3 retry attempts with delays of 2s, 4s, 8s.

### Expiry Management

Verifications can include optional expiry timestamps. System checks `block.timestamp > expiryTime` on each transfer attempt. Expired verifications require renewal through new verification process.

**Typical expiry periods**:
- Individual investors: 365 days
- Institutional accounts: No expiry
- Temporary access: 30 days
- Trial accounts: 7 days

### Revocation Process

Remove verification status for compliance violations or account closure:

```
POST /api/kyc/revoke-single
{
  "address": "0x742d35Cc...",
  "reason": "Compliance violation"
}
```

Batch revocation available for up to 500 addresses simultaneously. Revoked addresses cannot receive tokens until re-verified.

## Regulatory Framework

System designed for compliance with:

**FATF Travel Rule**: Store originator and beneficiary information for transactions over $1,000
**MiCA Requirements**: Identity verification for all EU token holders
**US Securities Laws**: Accredited investor verification for security tokens
**AML Directives**: Continuous monitoring with periodic re-verification

<Warning>
  Manual verification transfers legal liability to your institution. Ensure proper compliance procedures, documentation retention (7 years minimum), and regular audits before enabling manual verification.
</Warning>

## Performance Metrics

| Operation | Latency | Throughput | Gas Cost |
|-----------|---------|------------|----------|
| Single verification | 15 seconds | 100/minute | 65,000 |
| Batch (100) | 45 seconds | 5,000/minute | 2,100,000 |
| Status query | 50ms | 10,000/second | 0 (view function) |
| Revocation | 15 seconds | 100/minute | 45,000 |

## Error Handling

Common error codes and resolution:

`INVALID_ADDRESS`: Malformed Ethereum address - validate checksum
`COUNTRY_INVALID`: Unsupported country code - use ISO 3166-1 alpha-2
`BATCH_TOO_LARGE`: Over 5,000 records - split into multiple batches
`INSUFFICIENT_GAS`: Transaction underpriced - increase gas price by 20%
`DUPLICATE_ENTRY`: Address already verified - use update endpoint