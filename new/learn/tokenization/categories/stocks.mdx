---
title: "Stocks"
description: "ERC-3643 compliant security tokens for regulated equity on-chain"
---

Stock Tokens bring traditional equity on-chain with full regulatory compliance. Built on ERC-3643, these tokens integrate identity verification, transfer restrictions, and corporate actions directly into the smart contract—enabling 24/7 trading while maintaining securities law compliance.

## Why Institutions Tokenize Stocks

<CardGroup cols={2}>
    <Card title="Regulatory Compliance" icon="shield-check">
        ERC-3643 standard ensures transfers only occur between verified, eligible investors
    </Card>
    <Card title="24/7 Markets" icon="clock">
        Enable round-the-clock trading with instant settlement instead of T+2 cycles
    </Card>
    <Card title="DeFi Integration" icon="link">
        Authorize lending markets and other contracts to interact with your securities
    </Card>
    <Card title="Collateral Unlock" icon="lock-open">
        Transform equity into instant lending collateral without selling shares
    </Card>
</CardGroup>

## Architecture

Stock Tokens implement the ERC-3643 standard for regulated securities, connecting three core components:
```
┌─────────────────────────────────────────────────────────┐
│                    Stock Token                          │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────┐ │
│  │   ERC-20    │  │   Access    │  │   Corporate     │ │
│  │   Base      │  │   Control   │  │   Actions       │ │
│  └─────────────┘  └─────────────┘  └─────────────────┘ │
└───────────────────────┬─────────────────────────────────┘
                        │
        ┌───────────────┼───────────────┐
        ▼               ▼               ▼
┌──────────────┐ ┌──────────────┐ ┌──────────────────┐
│   Identity   │ │  Compliance  │ │   Authorized     │
│   Registry   │ │   Module     │ │   Contracts      │
└──────────────┘ └──────────────┘ └──────────────────┘
```

### Identity Registry

Every transfer validates both sender and receiver against the Identity Registry. The registry tracks:

- KYC verification status
- Investor accreditation level
- Jurisdiction restrictions
- Verification expiry dates

Transfers automatically fail if either party lacks valid verification.

### Compliance Module

Optional rules engine for additional transfer restrictions:

- Maximum holder limits
- Minimum/maximum transfer amounts
- Lock-up periods
- Country-based restrictions

The compliance module evaluates transfers after identity checks pass.

### Authorized Contracts

DeFi protocols (lending markets, trading pools) can be authorized to hold and transfer tokens without individual KYC. This enables:

- Collateral deposits to lending markets
- Liquidity pool participation
- Automated market making

Authorized contracts bypass identity checks but remain subject to compliance rules.

## Role System

Stock Tokens use role-based access control for different operational responsibilities:

| Role | Capabilities |
|------|--------------|
| **Issuer** | Full control: pause, configure, grant roles, authorize contracts |
| **Sub-Issuer** | Mint and redeem tokens, manage token supply |
| **Controller** | Freeze tokens, force transfers (regulatory enforcement) |
| **Legal Operator** | Contract upgrades (requires separate authorization) |

<Info>
Sub-Issuers enable multiple institutions to issue tokens against the same underlying asset. All sub-issuers mint from the same contract, creating unified liquidity across institutions.
</Info>

## Token Identification

Each Stock Token carries standard securities identifiers:

| Field | Description |
|-------|-------------|
| **ISIN** | International Securities Identification Number |
| **Name** | Full token name (e.g., "Tokenized Apple Inc.") |
| **Symbol** | Trading symbol (e.g., "tAAPL") |
| **Metadata URI** | Link to prospectus, terms, and documentation |

## Transfer Validation

Every transfer passes through validation checks:

<Steps>
    <Step title="Pause Check">
        Transfers blocked if token is paused
    </Step>
    <Step title="Balance Check">
        Sender must have sufficient unfrozen balance
    </Step>
    <Step title="Sender Verification">
        Identity Registry confirms sender is verified (unless authorized contract)
    </Step>
    <Step title="Receiver Verification">
        Identity Registry confirms receiver is verified (unless authorized contract)
    </Step>
    <Step title="Compliance Check">
        Compliance Module evaluates additional rules (if configured)
    </Step>
</Steps>

The `canTransfer` function returns specific rejection codes:

| Code | Meaning |
|------|---------|
| `SUCCESS` | Transfer allowed |
| `PAUSED` | Token transfers paused |
| `INSUFFICIENT_BALANCE` | Not enough tokens |
| `SENDER_TOKENS_FROZEN` | Sender balance frozen |
| `SENDER_NOT_ELIGIBLE` | Sender KYC invalid or expired |
| `RECEIVER_NOT_ELIGIBLE` | Receiver KYC invalid or expired |
| `COMPLIANCE_REJECTED` | Compliance module blocked transfer |

## Corporate Actions

Stock Tokens support on-chain corporate actions:

### Stock Splits

Adjust the split ratio without modifying individual balances:
```
Split Ratio = Numerator / Denominator

Example: 2:1 split (numerator=2, denominator=1)
- 100 tokens represent same ownership
- Price per token halves
- Trading and display systems read split ratio
```

The contract tracks cumulative split multipliers. External systems query `splitRatio()` to display adjusted values.

### Token Freezing

Controllers can freeze specific token amounts for regulatory holds:

- Frozen tokens cannot be transferred
- `transferableBalance` = `balance` - `frozenTokens`
- Partial freezes supported (freeze 50 of 100 tokens)

### Force Transfers

Controllers can execute forced transfers for:

- Court-ordered seizures
- Estate settlements
- Regulatory enforcement

Force transfers bypass normal validation and automatically unfreeze required amounts.

## DeFi Integration

### Authorizing Lending Markets

Before a lending market can accept Stock Tokens as collateral:
```
Issuer calls: addAuthorizedContract(lendingMarketAddress)
```

Authorized contracts can:
- Receive tokens without KYC (collateral deposits)
- Transfer tokens to verified addresses (collateral returns)
- Hold tokens indefinitely (lending pool reserves)

### Removing Authorization
```
Issuer calls: removeAuthorizedContract(contractAddress)
```

Existing holdings remain, but the contract can no longer receive new tokens.

## Deployment

<Tabs>
    <Tab title="Issuers App">
        Navigate to **Tokenization → Create Token → Stock Token**
        
        Configure:
        - **Name**: Full token name
        - **Symbol**: Trading ticker
        - **ISIN**: Securities identifier
        - **Metadata URI**: Link to documentation (IPFS recommended)
        - **Issuer Address**: Primary control wallet
        - **Legal Operator**: Upgrade authorization wallet
        
        The system deploys a minimal proxy pointing to the verified implementation, then initializes with your parameters.
    </Tab>
    <Tab title="Technical Details">
        Stock Tokens deploy using the EIP-1167 minimal proxy pattern:
        
        1. **Implementation**: Shared logic contract (deployed once)
        2. **Proxy**: Minimal contract pointing to implementation
        3. **Initialize**: Configure token parameters
        
        This reduces deployment costs (~90% gas savings) while maintaining upgradeability through the UUPS pattern.
        
        Each proxy is independent—upgrading one token doesn't affect others.
    </Tab>
</Tabs>

## Supply Management

### Issuing Tokens

Sub-Issuers mint new tokens to verified addresses:

| Operation | Description |
|-----------|-------------|
| `issue` | Mint to single recipient with reason code |
| `batchIssue` | Mint to multiple recipients (max 200 per tx) |

Reason codes (bytes32) provide audit trail context for each issuance.

### Redeeming Tokens

Burn tokens to remove from circulation:

| Operation | Description |
|-----------|-------------|
| `redeem` | Holder burns their own tokens |
| `redeemFrom` | Sub-Issuer burns from any address |

Redemptions require unfrozen, transferable balance.

## Compliance Best Practices

<CardGroup cols={2}>
    <Card title="Metadata Maintenance" icon="file-lines">
        Keep Metadata URI updated with current prospectus and terms
    </Card>
    <Card title="Registry Monitoring" icon="eye">
        Ensure Identity Registry reflects current KYC status
    </Card>
    <Card title="Role Separation" icon="users">
        Use different wallets for Issuer, Controller, and Legal Operator roles
    </Card>
    <Card title="Authorized Contract Audits" icon="magnifying-glass">
        Only authorize audited contracts for DeFi integration
    </Card>
</CardGroup>

<Warning>
Frozen tokens and paused states affect user experience. Use these controls judiciously and communicate clearly with token holders when restrictions apply.
</Warning>

## Integration with Lending

Stock Tokens integrate directly with Trusset lending markets:

1. **Authorize Market**: Issuer adds lending market as authorized contract
2. **Deposit Collateral**: Users deposit tokens to open loans
3. **Liquidation Handling**: Authorize liquidation router for seized collateral
4. **Collateral Return**: Market returns tokens on loan repayment

See [Lending Documentation](/new/learn/lending/lending-overview) for complete integration details.

<CardGroup cols={2}>
    <Card title="Identity Registry" icon="id-card" href="/new/learn/customers/identity-register">
        KYC and investor verification system
    </Card>
    <Card title="Lending Markets" icon="landmark" href="/new/learn/lending/lending-overview">
        Use Stock Tokens as lending collateral
    </Card>
</CardGroup>