---
title: "Auctions"
description: "Time-bound competitive bidding with automated settlement and anti-sniping protection"
---

Auctions enable price discovery through competitive bidding over fixed time periods. Sellers set reserve prices and duration while buyers submit increasing bids until auction expiration triggers automatic settlement to the highest bidder.

## Why Use Auctions

<CardGroup cols={2}>
    <Card title="Price Discovery" icon="magnifying-glass-dollar">
        Market determines value through competitive bidding rather than seller pricing
    </Card>
    <Card title="Time Pressure" icon="clock">
        Fixed duration creates urgency and incentivizes competitive bidding
    </Card>
    <Card title="Automatic Settlement" icon="gavel">
        Highest bid wins at expiration with atomic token transfer and payment
    </Card>
    <Card title="Anti-Sniping" icon="shield">
        Last-minute bids extend auction duration, preventing manipulation
    </Card>
</CardGroup>

## Auction Mechanics

Auctions run for configured durations (typically 24-72 hours) with minimum bid increments. Each new bid must exceed the current highest bid by the minimum increment percentage, typically 5-10%.

Sellers configure reserve prices—minimum acceptable bids that must be met for auction completion. Auctions ending below reserve price return tokens to sellers without trades executing.

<Accordion title="Bid Increment Calculation">
Minimum bid increments prevent penny-bidding spam while maintaining competitive dynamics:

```typescript
// Calculate minimum next bid
const currentHighBid = 100_000_000000; // 100,000 USDC
const minIncrement = 5; // 5% in basis points (500)

const minNextBid = currentHighBid + 
    (currentHighBid * minIncrement) / 10000;
// minNextBid = 105,000 USDC

// Validate new bid
if (newBid < minNextBid) {
    revert("BID_TOO_LOW");
}
```

Higher increment percentages (10-15%) suit high-value assets where large jumps are expected. Lower increments (2-5%) work better for price-sensitive markets with many participants.
</Accordion>

## Anti-Sniping Protection

Last-minute bids within the extension window automatically extend auction duration. This prevents sniping strategies where bidders wait until final seconds to submit winning bids without competition.

| Time Remaining | Bid Action | Result |
|---------------|------------|--------|
| more than 15 minutes | New bid received | No extension, auction continues |
| less than 15 minutes | New bid received | Extend auction by 15 minutes |
| 0 minutes | Auction expires | Settle to highest bidder automatically |
| No valid bids | Auction expires | Return token to seller |

Extension windows typically range from 10-30 minutes based on asset liquidity and expected bidding patterns. Extensions reset each time a new bid arrives during the window, creating fair competition windows.

## Auction Creation

Sellers configure all auction parameters during creation including duration, reserve price, minimum increment, and extension settings.

<CodeGroup>
```typescript Create Auction via API
// POST https://api.trusset.org/v1/trading/auctions/create

const response = await fetch('https://api.trusset.org/v1/trading/auctions/create', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${API_KEY}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    tokenAddress: "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb",
    tokenId: "42",
    reservePrice: "50000000000", // 50,000 USDC minimum
    paymentToken: "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",
    duration: 172800, // 48 hours in seconds
    minBidIncrement: 500, // 5% in bps
    extensionWindow: 900, // 15 minutes in seconds
    startTime: Math.floor(Date.now() / 1000) + 3600 // Start in 1 hour
  })
});

const { auctionId, escrowAddress } = await response.json();
```

```typescript Cancel Auction
// DELETE https://api.trusset.org/v1/trading/auctions/{auctionId}

await fetch(`https://api.trusset.org/v1/trading/auctions/${auctionId}`, {
  method: 'DELETE',
  headers: {
    'Authorization': `Bearer ${API_KEY}`
  }
});
// Only possible before first bid received
// Returns token from escrow to seller
```
</CodeGroup>

Tokens transfer to auction escrow upon creation, preventing seller withdrawal during active bidding. Sellers can only cancel auctions that haven't received any bids yet.

## Bidding Process

Bidders submit bids meeting minimum increment requirements. Each bid locks payment tokens in escrow, returning previous bidder's funds automatically.

<Tabs>
    <Tab title="Place Bid">
        Submit new bid exceeding current highest by minimum increment. Previous highest bidder receives automatic refund when outbid.

        ```typescript
        // POST https://api.trusset.org/v1/trading/auctions/bid

        await fetch('https://api.trusset.org/v1/trading/auctions/bid', {
          method: 'POST',
          body: JSON.stringify({
            auctionId: "auction_xyz789",
            bidAmount: "105000000000", // 105,000 USDC
            maxGasPrice: "50" // Optional gas limit
          })
        });

        // Smart contract:
        // 1. Validates bid meets minimum increment
        // 2. Checks bidder compliance (KYC, restrictions)
        // 3. Locks new bid payment in escrow
        // 4. Returns previous bidder's payment
        // 5. Extends auction if within extension window
        ```
    </Tab>
    
    <Tab title="Withdraw Bid">
        Bidders can withdraw bids only if they're no longer the highest bidder. Current highest bidder's funds remain locked until auction ends or they're outbid.

        ```typescript
        // POST https://api.trusset.org/v1/trading/auctions/withdraw

        await fetch('https://api.trusset.org/v1/trading/auctions/withdraw', {
          method: 'POST',
          body: JSON.stringify({
            auctionId: "auction_xyz789"
          })
        });
        // Only succeeds if not current highest bidder
        ```
    </Tab>
    
    <Tab title="View Auction">
        Query current auction state including highest bid, time remaining, and bid history.

        ```typescript
        // GET https://api.trusset.org/v1/trading/auctions/{auctionId}

        const auction = await fetch(
          `https://api.trusset.org/v1/trading/auctions/${auctionId}`,
          { headers: { 'Authorization': `Bearer ${API_KEY}` } }
        ).then(r => r.json());

        // Returns:
        // - currentHighBid
        // - highestBidder
        // - timeRemaining
        // - totalBids
        // - bidHistory[]
        ```
    </Tab>
</Tabs>

## Settlement

Auctions settle automatically when time expires. The smart contract transfers tokens to the highest bidder and payment to the seller in a single atomic transaction.

<Accordion title="Settlement Scenarios">
**Reserve Met, Bids Present:**
- Token transfers from escrow to highest bidder
- Payment transfers from escrow to seller minus marketplace fees
- Auction marked complete, no further bids accepted

**Reserve Not Met:**
- Token returns to seller from escrow
- Highest bidder receives payment refund
- Auction marked failed, seller can relist

**No Bids Received:**
- Token automatically returns to seller
- Auction expires without settlement
- No fees charged to seller

**Settlement Gas:**
Anyone can trigger settlement transaction after expiration. Typically executed by auction creator, highest bidder, or automated keeper services. Gas costs are minimal since state changes are limited to two transfers.
</Accordion>

Settlement transactions can be triggered by anyone after auction expiration—typically the seller, winning bidder, or automated keeper bots monitoring auction contracts. First to execute wins the gas race but outcome remains identical regardless of executor.

## Compliance Validation

Auctions enforce the same compliance rules as direct listings. Every bid validates identity verification and transfer restrictions before locking funds.

<ParamField path="validateBidder" type="function">
  Check bidder KYC status and token transfer permissions before accepting bid
</ParamField>

<ParamField path="checkTransferRestrictions" type="function">
  Validate token can transfer to bidder based on whitelist/blacklist rules
</ParamField>

<ParamField path="verifyWalletLimits" type="function">
  Ensure winning bidder won't exceed maximum holding restrictions
</ParamField>

Failed compliance checks reject bids before locking payment tokens, saving gas costs and preventing invalid auction participation.

<Warning>
Compliance rules are checked at bid submission time and again at settlement. If token restrictions change during the auction (e.g., winner gets blacklisted), settlement may fail and require manual resolution.
</Warning>

## Auction History

All bid activity records on-chain with complete audit trails. Query historical auctions for price discovery analysis or compliance reporting.

<ResponseField name="bidHistory" type="Bid[]">
  Array of all bids with amounts, bidders, timestamps, and transaction hashes
</ResponseField>

<ResponseField name="priceProgression" type="uint256[]">
  Historical price points showing competitive bidding intensity
</ResponseField>

<ResponseField name="participantCount" type="uint256">
  Unique bidders who participated, useful for liquidity metrics
</ResponseField>

<ResponseField name="settlementPrice" type="uint256">
  Final winning bid amount after auction completion
</ResponseField>

Export auction data for market analysis, regulatory reporting, or transparency dashboards through API endpoints or direct blockchain queries.

## Fee Structure

Marketplace charges fees on successful auction settlements, typically 2.5% of final bid amount. Fees are deducted from seller proceeds automatically during settlement.

```typescript
// Fee calculation at settlement
const winningBid = 125_000_000000; // 125,000 USDC
const feePercentage = 250; // 2.5% in bps

const feeAmount = (winningBid * feePercentage) / 10000;
const sellerReceives = winningBid - feeAmount;

// Results:
// feeAmount = 3,125 USDC
// sellerReceives = 121,875 USDC
```

Failed auctions (no bids or reserve not met) incur no fees. Sellers can relist without penalty, though initial escrow gas costs are not refunded.
