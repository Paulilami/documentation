---
title: "Order Book"
description: "Deploy your own exchange infrastructure. No vendor lock-in. Complete control."
tag: "Experimental"
---

# Order Book

Traditional exchange technology forces financial institutions into a choice: use a vendor's platform and accept permanent dependency, or build from scratch at massive cost. The Trusset Order Book eliminates this trade-off.

You deploy the smart contracts. You own the infrastructure. You control the rules.

## Why This Matters

<CardGroup cols={2}>
  <Card title="You Own It" icon="building-columns">
    Custody and settlement contracts deploy to your instance. Control upgrades, parameters, and access. Switch providers anytime—your infrastructure stays yours.
  </Card>
  <Card title="Regulatory-Ready" icon="scale-balanced">
    Immutable audit trails. Atomic settlement. Best execution through transparent order books. Compliance enforces automatically before every trade.
  </Card>
  <Card title="Non-Custodial" icon="shield-check">
    Assets remain in smart contracts you control. No counterparty risk from technology providers. Users verify balances on-chain anytime.
  </Card>
  <Card title="Institutional Performance" icon="bolt">
    Off-chain matching delivers sub-second order placement. On-chain settlement guarantees finality. The best of both worlds.
  </Card>
</CardGroup>

## How It Works

The order book uses a hybrid architecture: matching happens off-chain for speed, settlement happens on-chain for security.

```
┌─────────────┐      ┌─────────────┐      ┌─────────────┐
│   Trader    │ ──── │  Matching   │ ──── │  On-Chain   │
│   Places    │      │   Engine    │      │  Settlement │
│   Order     │      │  (instant)  │      │  (atomic)   │
└─────────────┘      └─────────────┘      └─────────────┘
```

1. Traders deposit tokens into the custody contract
2. Orders route through the matching engine instantly
3. Matched trades settle atomically on-chain
4. Failed settlements revert completely—no partial states

<Note>
  Your institution operates the matching engine. The settlement operator can execute matched trades but cannot access user funds. All balances remain verifiable on-chain.
</Note>

## Order Types

**Limit Orders** execute at your specified price or better. Orders remain active until filled, cancelled, or expired.

**Market Orders** execute immediately at the best available price. Use when speed matters more than price precision.

**Time-in-Force Options:**
- GTC (Good Till Cancelled)
- IOC (Immediate or Cancel)
- FOK (Fill or Kill)

## The Custody Contract

Three balance states provide complete transparency:

| State | Description |
|-------|-------------|
| Total Balance | All tokens deposited by the user |
| Available Balance | Free for new orders or withdrawal |
| Locked Balance | Committed to open orders |

```solidity
// Deposit to start trading
custody.deposit(tokenAddress, amount);

// Check available balance
custody.getAvailableBalance(userAddress, tokenAddress);

// Withdraw anytime from available balance
custody.withdraw(tokenAddress, amount);
```

## Settlement

Batch settlement processes multiple trades in a single transaction:

- Reduces gas costs significantly
- Ensures atomic execution—all trades settle or none do
- Cryptographic proof validates order book state
- Invalid settlements revert automatically

## Compliance Built In

The order book inherits your token's transfer restrictions automatically. Your Identity Verification Contract validates counterparties before settlement. Non-compliant trades reject at the contract level.

KYC verification, geographic restrictions, and holding limits all enforce through your existing token configuration. No additional compliance layer required.

## Getting Started

<Steps>
  <Step title="Create Order Book">
    Deploy through the API or Issuers Dashboard. Pair your security token with a quote token (typically a stablecoin).
  </Step>
  <Step title="Configure Parameters">
    Set minimum order sizes, tick sizes, and fee structure. Maker/taker fees configure independently.
  </Step>
  <Step title="Go Live">
    Order book activates immediately. Integrate via REST API and WebSocket for real-time updates.
  </Step>
</Steps>

## White Label Ready

Enable the Order Book module in your white label deployment for a complete trading interface:

- Real-time order book visualization
- TradingView charts
- Order entry and position management
- Wallet connection and custody deposits

Your branding. Your compliance rules. No frontend development required.

## Security Architecture

| Feature | Benefit |
|---------|---------|
| Non-custodial | Users control deposits and withdrawals |
| Atomic settlement | Trades complete fully or revert entirely |
| UUPS proxy pattern | Upgradeable for security patches |
| Operator limits | Settlement operator cannot access funds |
| On-chain verification | All balances verifiable via contract reads |